	NAME "CH04_08"

STACK	SEGMENT	STACK
	DD	128	DUP(00000000H)
STACK	ENDS
	
DATA	SEGMENT
ARRAY	DB	32	DUP(0FH)
PRIME	DD	10	DUP(00H)
DATA	ENDS

CODE	SEGMENT
	ASSUME  CS:CODE,	DS:DATA,	ES:DATA,	SS:STACK
START:  
	PUSHA
	
	MOV	AX,	DATA
	MOV	DS,	AX
	MOV	ES,	AX
	LEA	SI,	ARRAY
	LEA	DI,	PRIME
	MOV	W.[SI],	0000H
	MOV	CX,	10
K1:
K2:		
		INC	SI
		TEST	[SI],	0FH
		JZ	K2
	MOV	[DI],	SI
L2:	
		MOV	[SI],	00H
		ADD	SI,	[DI]
		CMP	SI,	32
		JB	L2
	LEA	SI,	ARRAY
	INC	DI
	LOOP	K1	; external loop.
	
	POPA
	MOV	AH,	4CH
	INT	21H
CODE	ENDS

END	START
